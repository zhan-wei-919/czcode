spring:
  datasource:
    url: ${DB_URL:jdbc:postgresql://localhost:5432/auth_service}
    username: ${DB_USER:postgres}
    password: ${DB_PASSWORD:postgres}
  jpa:
    hibernate:
      ddl-auto: validate
    open-in-view: false
  flyway:
    enabled: true
    locations: classpath:db/migration

auth:
  jwt:
    secret: ${JWT_SECRET:change-this-secret-to-at-least-32-bytes-for-dev}
    active-kid: ${JWT_ACTIVE_KID:v1}
    keys:
      v1: ${JWT_SECRET:change-this-secret-to-at-least-32-bytes-for-dev}
    access-token-ttl-seconds: ${JWT_ACCESS_TOKEN_TTL_SECONDS:3600}
    refresh-token-ttl-seconds: ${JWT_REFRESH_TOKEN_TTL_SECONDS:1209600}
  code:
    ttl-seconds: ${AUTH_CODE_TTL_SECONDS:300}
    debug-return-enabled: ${AUTH_CODE_DEBUG_RETURN_ENABLED:true}

services:
  user-service:
    base-url: ${USER_SERVICE_BASE_URL:http://localhost:18082}
    resilience:
      retry:
        max-attempts: ${USER_SERVICE_RETRY_MAX_ATTEMPTS:3}
        wait-duration-ms: ${USER_SERVICE_RETRY_WAIT_MS:200}
      circuit-breaker:
        sliding-window-size: ${USER_SERVICE_CB_SLIDING_WINDOW_SIZE:20}
        minimum-number-of-calls: ${USER_SERVICE_CB_MINIMUM_NUMBER_OF_CALLS:10}
        failure-rate-threshold: ${USER_SERVICE_CB_FAILURE_RATE_THRESHOLD:50}
        wait-duration-open-ms: ${USER_SERVICE_CB_WAIT_DURATION_OPEN_MS:10000}
        permitted-calls-in-half-open-state: ${USER_SERVICE_CB_HALF_OPEN_PERMITTED_CALLS:3}
