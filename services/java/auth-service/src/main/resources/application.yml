spring:
  application:
    name: auth-service
  profiles:
    active: dev

server:
  port: 18081

management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics,prometheus
  metrics:
    tags:
      application: ${spring.application.name}
    distribution:
      percentiles-histogram:
        http.server.requests: true
  endpoint:
    health:
      probes:
        enabled: true
      show-details: always

logging:
  pattern:
    level: "%5p [traceId:%X{traceId:-}]"

app:
  ratelimit:
    enabled: true
    max-subjects: 20000
    rules:
      - id: auth-send-code
        path: /api/v1/auth/send-code
        method: POST
        capacity: 5
        refill-tokens: 5
        refill-duration-seconds: 60
      - id: auth-login
        path: /api/v1/auth/login
        method: POST
        capacity: 20
        refill-tokens: 20
        refill-duration-seconds: 60
      - id: auth-refresh
        path: /api/v1/auth/refresh
        method: POST
        capacity: 40
        refill-tokens: 40
        refill-duration-seconds: 60
